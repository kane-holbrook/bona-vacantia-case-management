<template>
    <div class="slds-form-element slds-m-around_medium">
        <label class="slds-form-element__label" for="date-inserted">
            Date Inserted
        </label>
        <div class="slds-form-element__control">
            <lightning-input type="date" name="date-inserted" value={dateInserted} onchange={handleInputChange} required></lightning-input>
        </div>
    </div>
    <div class="slds-form-element slds-m-around_medium">
        <label class="slds-form-element__label" for="description">
            Description
        </label>
        <div class="slds-form-element__control">
            <lightning-input type="text" name="description" value={description} onchange={handleInputChange} required></lightning-input>
        </div>
    </div>    
    <div class="slds-form-element slds-m-around_medium">
        <label class="slds-form-element__label" for="details">Details</label>
        <div class="slds-form-element__control">
            <lightning-textarea name="details" value={details} onchange={handleInputChange}></lightning-textarea>
        </div>
    </div>
    <div class="slds-form-element slds-m-around_medium">
        <label class="slds-form-element__label" for="flag-important">Flag as important</label>
        <div class="slds-form-element__control">
            <lightning-input type="checkbox" name="flag-important" checked={flagImportant} onchange={handleInputChange}></lightning-input>
        </div>
    </div>

    <div class="slds-form-element slds-m-around_medium">
        <button class="slds-button slds-button_neutral" onclick={handleImport}>Import</button>
    </div>

    <!-- Related Items Section -->
    <div class="slds-form-element slds-m-around_medium">
        <h3>Related Documents</h3>
        <lightning-datatable
            key-field="id"
            data={relatedItems}
            columns={relatedItemColumns}
            hide-checkbox-column="true"
            onrowaction={handleRowAction}>
        </lightning-datatable>
    </div>

    <template if:true={isSubModalOpen}>
        <div class="slds-backdrop slds-backdrop_open" style="width: 100vw;left: calc(-50vw + 50%);"></div>
        <section role="dialog" tabindex="-1" aria-modal="true" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container small-modal">
                <header class="slds-modal__header">
                    <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closeModal}>
                        <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                        <span class="slds-assistive-text">Close</span>
                    </button>
                    <h2 class="slds-text-heading_medium">Add document</h2>
                </header>
                <div class="slds-modal__content slds-p-around_medium">
                    <c-history-document-modal file-name={fileName} onfilechange={handleFileChange} onfieldchange={handleFieldChange} onfileremove={handleFileRemove}></c-history-document-modal>
                </div>
                <footer class="slds-modal__footer">
                    <button class="slds-button slds-button_neutral" onclick={closeSubModal}>Cancel</button>
                    <button class="slds-button slds-button_brand" onclick={handleSave}>asd</button>
                </footer>
            </div>
        </section>
    </template>
</template>