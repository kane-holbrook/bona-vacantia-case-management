<template>
    <!-- Flexbox container for sidebar and main content -->
    <div class="slds-grid slds-wrap custom-container">
        
        <!-- Sidebar with a sticky position -->
        <div class="slds-col custom-sidebar">
            <lightning-accordion allow-multiple-sections-open>
                <template for:each={recordTypeGroupsWithCounts} for:item="group">
                    <lightning-accordion-section name={group.recordTypeName} label={group.labelWithCount} key={group.recordTypeName}>
                        <ul class="slds-m-left_medium">
                            <template for:each={group.records} for:item="record">
                                <li key={record.Id} class="slds-m-bottom_x-small">
                                    <a href="#" data-id={record.Id} onclick={handleRecordClick}>
                                        {record.Title__c}
                                    </a>
                                </li>
                            </template>
                        </ul>
                    </lightning-accordion-section>
                </template>
            </lightning-accordion>
        </div>
        
        <!-- Main content area, including inline modal -->
        <div class="slds-col custom-main-content">
            <!-- Conditional rendering for selected record details -->
            <template if:true={selectedRecordId}>
                <!-- Inline detail view for the selected record -->
                <div class="inline-modal">
                    <div class="slds-box slds-theme_default">
                        <lightning-record-form record-id={selectedRecordId} object-api-name="AssetLiability__c" layout-type="Full">
                            <!-- The component will automatically display all fields in the page layout -->
                        </lightning-record-form>
                    </div>
                </div>
            </template>
        </div>
    </div>
</template>